using ReModAres.Core;
using ReModAres.Core.Managers;
using Serpent.Loader;
using UnityEngine;

namespace Serpent.Components
{
    internal class ExploitJustBComponent : ModComponent
    {

        public ExploitJustBComponent()
        {

        }


        public override void OnUiManagerInit(UiManager uiManager)
        {
            base.OnUiManagerInit(uiManager);

            var subMenu = uiManager.MainMenu.GetMenuPage(Page.PageNames.WorldCheats);
            var cheatMenu = subMenu.AddMenuPage("Club B", "Club B Room teleports", ResourceManager.GetSprite("remodce.world"));

            cheatMenu.AddButton($"Room 1", "Teleport to room", delegate { JustBCheat("Bedroom 1", new Vector3(-223.7f, -11.3f, 151.1f)); }, ResourceManager.GetSprite("remodce.exit-door"));

            cheatMenu.AddButton($"Room 2", "Teleport to room", delegate { JustBCheat("Bedroom 2", new Vector3(-211.2f, 55.7f, -91.3f)); }, ResourceManager.GetSprite("remodce.exit-door"));

            cheatMenu.AddButton($"Room 3", "Teleport to room", delegate { JustBCheat("Bedroom 3", new Vector3(-124.6f, -11.3f, 150.3f)); }, ResourceManager.GetSprite("remodce.exit-door"));

            cheatMenu.AddButton($"Room 4", "Teleport to room", delegate { JustBCheat("Bedroom 4", new Vector3(-111.3f, 55.7f, -90.5f)); }, ResourceManager.GetSprite("remodce.exit-door"));

            cheatMenu.AddButton($"Room 5", "Teleport to room", delegate { JustBCheat("Bedroom 5", new Vector3(-24.7f, -11.3f, 150.6f)); }, ResourceManager.GetSprite("remodce.exit-door"));

            cheatMenu.AddButton($"Room 6", "Teleport to room", delegate { JustBCheat("Bedroom 6", new Vector3(-11.3f, 55.7f, -90.5f)); }, ResourceManager.GetSprite("remodce.exit-door"));

            cheatMenu.AddButton($"VIP room", "Teleport to room", delegate { JustBCheat("Bedroom VIP", new Vector3(57.9796f, 62.8633f, 0.001f)); }, ResourceManager.GetSprite("remodce.exit-door"));
        }

        public static void JustBCheat(string gameObjectName, Vector3 teleportLocation)
        {
            if (RoomManager.field_Internal_Static_ApiWorld_0.id == "wrld_1b3b3259-0a1f-4311-984e-826abab6f481")
            {
                foreach (GameObject gameObject in Resources.FindObjectsOfTypeAll<GameObject>())
                {
                    bool roomActive = gameObject.name.Contains(gameObjectName);
                    if (roomActive)
                    {
                        gameObject.SetActive(true);
                    }
                }
                VRCPlayer.field_Internal_Static_VRCPlayer_0.transform.position = teleportLocation;
                ReLogger.Msg("Teleported to Room " + gameObjectName);
                Serpent.LogDebug("Teleported to Room " + gameObjectName);
            }
            else
            {
                ReLogger.Msg("You are not in the Just B club");
                Serpent.LogDebug("You are not in the Just B club");
            }
        }

    }
}
